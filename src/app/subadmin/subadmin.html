<div class="subadmin-container">
    <!-- Header Section -->
    <div class="page-header">
        <div class="header-left">
            <h1>SubAdmin Management</h1>
        </div>
        <div class="header-right">
            <div class="breadcrumb">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round" />
                    <polyline points="9,22 9,12 15,12 15,22" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round" />
                </svg>
                <span>Home > subadmins</span>
            </div>
        </div>
    </div>

    <!-- Action Buttons -->
    <div class="action-buttons">
        <button class="action-btn primary" (click)="addNewSubAdmin()">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <line x1="12" y1="5" x2="12" y2="19" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round" />
                <line x1="5" y1="12" x2="19" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round" />
            </svg>
            Add New SubAdmin
        </button>
        
    </div>

    <!-- Summary Cards -->
    <div class="summary-cards">
        <div class="summary-card primary">
            <div class="card-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round" />
                    <circle cx="9" cy="7" r="4" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round" />
                    <path d="M23 21v-2a4 4 0 0 0-3-3.87" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round" />
                    <path d="M16 3.13a4 4 0 0 1 0 7.75" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round" />
                </svg>
            </div>
            @if(getRole !=='superadmin'){
            <div class="card-content">
                <div class="card-value">{{ mySubadminslength || 0}}</div>
                <div class="card-label">My SubAdmins</div>
            </div>
            }@else {
            <div class="card-content">
                <div class="card-value">{{ subadmins.length }}</div>
                <div class="card-label">Total SubAdmins</div>
            </div>
            }
        </div>



        <div class="summary-card">
            <div class="card-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round" />
                    <circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round" />
                </svg>
            </div>
            <div class="card-content">
                <div class="card-value">{{ summaryStats.totalCustomers }}</div>
                <div class="card-label">Total Customers</div>
                <button class="view-details-btn" (click)="viewCustomerDetails()">
                    <span>View Details</span>
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <line x1="5" y1="12" x2="19" y2="12" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round" />
                        <polyline points="12,5 19,12 12,19" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                </button>
            </div>
        </div>


    </div>

    <!-- Sub-Admin Performance Table -->
    <div class="performance-section" *ngIf="getRole=='superadmin'">
        <div class="section-header">
            <h2>
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M18 20V10" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round" />
                    <path d="M12 20V4" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round" />
                    <path d="M6 20v-6" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round" />
                </svg>
                All Sub-Admins
            </h2>
        </div>
        <div class="table-container">
            <table class="performance-table">
                <thead>
                    <tr>
                        <th>Username</th>
                        <th>Balance</th>
                        <th>Admin</th>
                        <th>Customers</th>
                        <th>Created</th>
                        <th>Details</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let subadmin of subadmins" class="performance-row">
                        <td class="username">{{ subadmin.name }}</td>
                        <td class="balance">{{ subadmin.balance }}</td>
                        <td class="admin">{{ subadmin.admin.name }}</td>
                        <td class="customers">{{ subadmin.customers.length }}</td>
                        <td class="created">{{ subadmin.date |date:'medium' }}</td>
                        <td class="actions">
                            <button class="action-btn add-balance" (click)="addBalance(subadmin.id)">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <line x1="12" y1="5" x2="12" y2="19" stroke="currentColor" stroke-width="2"
                                        stroke-linecap="round" stroke-linejoin="round" />
                                    <line x1="5" y1="12" x2="19" y2="12" stroke="currentColor" stroke-width="2"
                                        stroke-linecap="round" stroke-linejoin="round" />
                                </svg>
                                Manage Balance
                            </button>

                            <button class="action-btn customers" (click)="viewCustomers(subadmin.id)">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" stroke="currentColor"
                                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                    <circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="2"
                                        stroke-linecap="round" stroke-linejoin="round" />
                                </svg>
                                Customers
                            </button>

                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- special to single subadmin only -->
    <div class="performance-section" *ngIf="getRole=='admin'">
        <div class="section-header">
            <h2>
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M18 20V10" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round" />
                    <path d="M12 20V4" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round" />
                    <path d="M6 20v-6" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round" />
                </svg>
                My Sub-Admins
            </h2>
        </div>
        <div class="table-container">
            <table class="performance-table">
                <thead>
                    <tr>
                        <th>Username</th>
                        <th>Balance</th>
                        <th>Admin</th>
                        <th>Customers</th>
                        <th>Created</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let subadmin of allMySubadmins" class="performance-row">
                        <td class="username">{{ subadmin.name }}</td>
                        <td class="balance">{{ subadmin.balance }}</td>
                        <td class="admin">{{ subadmin.admin.name }}</td>
                        <td class="customers">{{ subadmin.customers.length }}</td>
                        <td class="created">{{ subadmin.date |date:'medium' }}</td>
                        <td class="actions">
                            <button class="action-btn add-balance" (click)="addBalance(subadmin.id)">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <line x1="12" y1="5" x2="12" y2="19" stroke="currentColor" stroke-width="2"
                                        stroke-linecap="round" stroke-linejoin="round" />
                                    <line x1="5" y1="12" x2="19" y2="12" stroke="currentColor" stroke-width="2"
                                        stroke-linecap="round" stroke-linejoin="round" />
                                </svg>
                                Add Balance
                            </button>

                            <button class="action-btn customers" (click)="viewCustomers(subadmin.id)">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" stroke="currentColor"
                                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                    <circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="2"
                                        stroke-linecap="round" stroke-linejoin="round" />
                                </svg>
                                Customers
                            </button>

                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Bottom Tables -->
    <div class="bottom-tables" *ngIf="getRole=='superadmin'">
        <!-- Recent Transactions -->
        <div class="table-section">
            <div class="section-header">
                <h3>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round" />
                        <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />
                    </svg>
                    Recent Transactions
                </h3>
            </div>
            <div class="table-container">
                <table class="transactions-table">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Sub-Admin</th>
                            <th>Amount</th>
                            <th>Notes</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let transaction of recentTransactions" class="transaction-row">
                            <td class="date">{{ transaction.date }}</td>
                            <td class="subadmin">{{ transaction.subAdmin }}</td>
                            <td class="amount">{{ transaction.amount }}</td>
                            <td class="notes">{{ transaction.notes }}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Recent Customers -->
        <div class="table-section">
            <div class="section-header">
                <h3>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round" />
                        <circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />
                    </svg>
                    Recent Customers
                </h3>
            </div>
            <div class="table-container">
                <table class="customers-table">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Customer</th>
                            <th>Type</th>
                            <th>Sub-Admin</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngIf="recentCustomers.length === 0" class="empty-row">
                            <td colspan="4" class="empty-message">No customers found</td>
                        </tr>
                        <tr *ngFor="let customer of recentCustomers" class="customer-row">
                            <td class="date">{{ customer.date }}</td>
                            <td class="customer">{{ customer.name }}</td>
                            <td class="type">{{ customer.type }}</td>
                            <td class="subadmin">{{ customer.subAdmin }}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>